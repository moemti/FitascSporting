
/* Smart HTML Elements v7.3.0 (2020-Apr) 
Copyright (c) 2011-2020 jQWidgets. 
License: https://htmlelements.com/license/ */ //

!function(e){var t={};function a(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(i,n,function(t){return e[t]}.bind(null,n));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=60)}({60:function(e,t){Smart("smart-grid-panel",class extends Smart.BaseElement{static get properties(){return{closeButtonPosition:{value:"left",allowedValues:["left","right"],type:"string"},dataSource:{value:[],type:"array",reflectToAttribute:!1},messages:{value:{en:{apply:"Apply",booleanFirst:"☐",booleanLast:"☑",cancel:"Cancel",dateFirst:"1",dateLast:"9",from:"from",numberFirst:"1",numberLast:"9",stringFirst:"A",stringLast:"Z",thenBy:"then by"}},type:"object",extend:!0}}}static get listeners(){return{change:"_changeHandler",click:"_clickHandler",keydown:"_keydownHandler","sortable.dragEnd":"_sortableDragEndHandler"}}static get requires(){return{"Smart.Input":"smart.input.js","Smart.Sortable":"smart.sortable.js"}}static get styleUrls(){return["smart.gridpanel.css"]}template(){return'<div id="container" role="presentation">\n                    <smart-sortable id="sortable" animation="[[animation]]" disabled="[[readonly]]" right-to-left="[[rightToLeft]]" \n                            drag-mode="handle" handle-position="right" handle-visibility="visible" theme="[[theme]]">\n                    </smart-sortable>\n                    <div id="footer" class="smart-grid-panel-container-footer" role="presentation">\n                        <smart-input id="inputNotSorted" right-to-left="[[rightToLeft]]" animation="[[animation]]" readonly theme="[[theme]]"></smart-input>\n                        <div id="buttonsContainer" class="smart-grid-panel-buttons-container smart-unselectable" role="presentation">\n                            <span class="smart-grid-panel-cancel-button" role="button"></span>\n                            <span class="smart-grid-panel-apply-button" role="button"></span>\n                        </div>\n                    </div>\n                </div>'}ready(){super.ready()}render(){const e=this;e.setAttribute("role","dialog"),"right"===e.closeButtonPosition&&(e.$.sortable.handlePosition="left"),e._localize(),e._createSources(),super.render()}propertyChangedHandler(e,t,a){super.propertyChangedHandler(e,t,a);const i=this;switch(e){case"animation":case"theme":Array.from(i.$.sortable.getElementsByTagName("smart-input")).forEach(t=>t[e]=a);break;case"disabled":case"unfocusable":i._setFocusable();break;case"closeButtonPosition":"right"===i.closeButtonPosition?i.$.sortable.handlePosition="left":i.$.sortable.handlePosition="right";break;case"dataSource":i.$.sortable.$.container.innerHTML="",i._createSources();break;case"locale":case"messages":{const e=i.$.sortable._items;i._localize(),e.length&&(e[0].children[1].innerHTML=i.localize("firstBy"),e.forEach((function(e,t){0!==t&&(e.children[1].innerHTML=i.localize("thenBy"));const a=i._HTMLToSourceMap.get(e),n=i._ascDescTemplates[a.dataType]||i._ascDescTemplates.string;e.children[3].innerHTML=i.localize("from"),e.children[4].firstElementChild.innerHTML=n[0],e.children[4].children[1].innerHTML=n[1]})));break}case"maxLevel":if(null!=a)for(;i.$.sortable._items.length>0&&i.$.sortable._items.length>a;)i._interactionHandler(i.$.sortable._items[i.$.sortable._items.length-1].firstElementChild);i._disableItemAddition();break;case"rightToLeft":i.$.inputNotSorted.rightToLeft=a,i.$.inputNotSorted.dropDownButtonPosition=a?"left":"right",i.$.sortable._items.forEach(e=>{const t=e.querySelector("smart-input");t.rightToLeft=a,t.dropDownButtonPosition=a?"left":"right"})}}_changeHandler(e){const t=this,a=t.shadowRoot||t.isInShadowDOM?e.composedPath()[0]:e.target;if(t.$.inputNotSorted.contains(a)){const e=t.$.inputNotSorted.value,a=t._labelToSourceMap.get(e);return t._createSortItem(a,t.$.sortable._items.length),t.$.sortable.updateItems(),t._visibleLabels.push(e),t._updateHiddenSource(),t._disableItemAddition(),void(t.$.inputNotSorted.value="")}const i=a.closest("smart-input");if(!i)return;const n=i.parentElement.parentElement,l=n.children[4].firstElementChild,r=n.children[4].children[1],o=i.value,s=t._HTMLToSourceMap.get(n).label,d=t._labelToSourceMap.get(o),c=t._ascDescTemplates[d.dataType]||t._ascDescTemplates.string;t._HTMLToSourceMap.set(n,d),t._visibleLabels.splice(t._visibleLabels.indexOf(s),1,o),t._updateHiddenSource(),l.innerHTML=c[0],r.innerHTML=c[1],d.sortDirection&&-1===d.sortDirection.indexOf("asc")?(r.classList.add("selected"),l.classList.remove("selected")):(l.classList.add("selected"),r.classList.remove("selected"))}_updateHiddenSource(){const e=this;e._hiddenSource=e.dataSource.map(e=>({label:e.label,value:e.dataField,icon:e.icon})).filter(t=>-1===e._visibleLabels.indexOf(t.label)),e.$.inputNotSorted.dataSource=e._hiddenSource,e.$.sortable._items.forEach(t=>t.getElementsByTagName("smart-input")[0].dataSource=e._hiddenSource),e._disableItemAddition()}_clickHandler(e){this._interactionHandler(this.shadowRoot||this.isInShadowDOM?e.composedPath()[0]:e.target,e)}_interactionHandler(e,t){const a=this;if(a.disabled||a.readonly)return!0;const i=e.closest(".smart-grid-panel-item");if(i){if(e===i.firstElementChild){const e=a._HTMLToSourceMap.get(i).label;a.$.sortable.$.container.removeChild(i),a.$.sortable.updateItems(),a._visibleLabels.splice(a._visibleLabels.indexOf(e),1),a._updateHiddenSource(),a._disableItemAddition(),a.$.sortable._items.length&&(a.$.sortable._items[0].children[1].innerHTML=a.localize("firstBy"))}else if(i.children[4].contains(e)){const n=i.children[4].firstElementChild,l=i.children[4].children[1];"click"===t.type?e.classList.contains("selected")||(e===n?(l.classList.remove("selected"),n.classList.add("selected"),a._HTMLToSourceMap.get(i).sortDirection="ascending"):e===l&&(n.classList.remove("selected"),l.classList.add("selected"),a._HTMLToSourceMap.get(i).sortDirection="descending")):(n.classList.toggle("selected"),l.classList.toggle("selected"),a._HTMLToSourceMap.get(i).sortDirection=n.classList.contains("selected")?"ascending":"descending")}return!0}if(e===a.$.buttonsContainer.firstElementChild)return a.$.fireEvent("cancel"),!0;if(e===a.$.buttonsContainer.children[1]){const e=[],t={dataFields:[],dataTypes:[],orderBy:[]},i={value:e};return a.$.sortable._items.forEach(i=>{const n=a._HTMLToSourceMap.get(i);e.push({dataField:n.dataField,sortDirection:n.sortDirection}),t.dataFields.push(n.dataField),t.dataTypes.push(n.dataType),t.orderBy.push(n.sortDirection)}),a instanceof Smart.SortPanel&&(i.sortByInfo=t),a.$.fireEvent("apply",i),!0}}_keydownHandler(e){const t=this,a=e.key;" "!==a&&"Enter"!==a||(e.preventDefault(),t._interactionHandler((t.shadowRoot||t.getRootNode()).activeElement,e))}_sortableDragEndHandler(e){const t=this,a=e.detail.oldIndex,i=e.detail.newIndex,n=Math.max(a,i),l=t.$.sortable._items;0===(a&&i)&&(l[0].children[1].innerHTML=t.localize("firstBy"),l[1].children[1].innerHTML=t.localize("thenBy"),n>1&&(l[n].children[1].innerHTML=t.localize("thenBy")))}_localize(){this.$.inputNotSorted.placeholder=this.localize("pickAnother"),this.$.buttonsContainer.firstElementChild.innerHTML=this.localize("cancel"),this.$.buttonsContainer.children[1].innerHTML=this.localize("apply"),this._ascDescTemplates={boolean:[this.localize("booleanFirst")+" → "+this.localize("booleanLast"),this.localize("booleanLast")+" → "+this.localize("booleanFirst")],date:[this.localize("dateFirst")+" → "+this.localize("dateLast"),this.localize("dateLast")+" → "+this.localize("dateFirst")],number:[this.localize("numberFirst")+" → "+this.localize("numberLast"),this.localize("numberLast")+" → "+this.localize("numberFirst")],string:[this.localize("stringFirst")+" → "+this.localize("stringLast"),this.localize("stringLast")+" → "+this.localize("stringFirst")]}}_createSources(){const e=this,t=(e instanceof Smart.SortPanel?"sort":"group")+"Index",a=[],i=[];if(e._HTMLToSourceMap=new Map,e._labelToSourceMap=new Map,e.dataSource.forEach(i=>{e._labelToSourceMap.set(i.label,i),-1!==i[t]&&void 0!==i[t]&&a.push(i)}),a.sort((e,a)=>e[t]-a[t]),void 0!==e.maxLevel&&null!==e.maxLevel)for(;a.length>0&&a.length>e.maxLevel;)a.pop();e.$.inputNotSorted.dropDownButtonPosition=e.rightToLeft?"left":"right",a.forEach(e=>i.push(e.label)),e._visibleLabels=i,e._updateHiddenSource(),a.forEach((t,a)=>{e._createSortItem(t,a)}),e.$.sortable.updateItems(),e._disableItemAddition(),e._setFocusable()}_createSortItem(e,t){const a=this.disabled||this.unfocusable?-1:0,i=document.createElement("div"),n=this._ascDescTemplates[e.dataType]||this._ascDescTemplates.string;i.className="smart-grid-panel-item",i.innerHTML=`<div class="smart-grid-panel-item-close-button" tabindex="${a}" role="button" aria-label="Close"></div>\n<div class="smart-grid-panel-label-by smart-unselectable" role="presentation">${this.localize(t>0?"thenBy":"firstBy")}</div>\n<div class="smart-grid-panel-field-container" role="presentation"><smart-input class="smart-grid-panel-field-selection" value="${e.label}" animation="${this.animation}" readonly theme="${this.theme}" aria-label="Field name"></smart-input></div>\n<div class="smart-grid-panel-from smart-unselectable" role="presentation">${this.localize("from")}</div >\n<div class="smart-grid-panel-direction smart-unselectable" tabindex="${a}" role="presentation">\n    <div class="smart-grid-panel-asc" role="button" aria-label="Ascending">${n[0]}</div >\n    <div class="smart-grid-panel-desc" role="button" aria-label="Descending">${n[1]}</div>\n</div>\n`;const l=i.querySelector("smart-input");l.dataSource=this._hiddenSource,l.rightToLeft=this.rightToLeft,l.dropDownButtonPosition=this.rightToLeft?"left":"right",this.$.sortable.$.container.appendChild(i),l.tabIndex=a,e.sortDirection&&-1===e.sortDirection.indexOf("asc")?i.children[4].children[1].classList.add("selected"):(e.sortDirection="ascending",i.children[4].firstElementChild.classList.add("selected")),this._HTMLToSourceMap.set(i,e)}_disableItemAddition(){const e=this,t=e.maxLevel,a=0===e._hiddenSource.length||null!=t&&Math.max(0,t)===e.$.sortable._items.length;e.$.inputNotSorted.disabled=a,a&&e.$.inputNotSorted.removeAttribute("focus")}_setFocusable(){const e=this.disabled||this.unfocusable?-1:0,t=Array.from(this.getElementsByClassName("smart-grid-panel-item-close-button")),a=Array.from(this.getElementsByClassName("smart-grid-panel-direction")),i=Array.from(this.getElementsByTagName("input")),n=t.concat(a).concat(i);this.$.buttonsContainer.firstElementChild.tabIndex=e,this.$.buttonsContainer.children[1].tabIndex=e,n.forEach(t=>t.tabIndex=e)}}),Smart("smart-sort-panel",class extends Smart.GridPanel{static get properties(){return{messages:{value:{en:{firstBy:"Sort by",noSorting:"No sorting applied",pickAnother:"Pick another field to sort by"}},type:"object",extend:!0}}}static get styleUrls(){return["smart.textbox.css"]}_localize(){super._localize();this.$.sortable.$.container.setAttribute("no-sorting",this.localize("noSorting"))}}),Smart("smart-group-panel",class extends Smart.GridPanel{static get properties(){return{maxLevel:{value:8,type:"number?"},messages:{value:{en:{collapseAll:"Collapse all",expandAll:"Expand all",firstBy:"Group by",noGrouping:"No grouping",pickAnother:"Pick another field to group by"}},type:"object",extend:!0}}}template(){return'<div id="container" role="presentation">\n                    <smart-sortable right-to-left="[[rightToLeft]]" id="sortable" animation="[[animation]]" disabled="[[readonly]]" drag-mode="handle" handle-position="right" handle-visibility="visible" theme="[[theme]]"></smart-sortable>\n                    <div id="expandCollapseContainer" class="smart-grid-panel-buttons-container smart-grid-panel-expand-collapse smart-unselectable" role="presentation">\n                        <span class="smart-group-panel-collapse-button" role="button"></span>\n                        <span class="smart-group-panel-expand-button" role="button"></span>\n                    </div>\n                    <div id="footer" class="smart-grid-panel-container-footer" role="presentation">\n                        <smart-input right-to-left="[[rightToLeft]]" id="inputNotSorted" animation="[[animation]]" readonly theme="[[theme]]"></smart-input>\n                        <div id="buttonsContainer" class="smart-grid-panel-buttons-container smart-unselectable" role="presentation">\n                            <span class="smart-grid-panel-cancel-button" role="button"></span>\n                            <span class="smart-grid-panel-apply-button" role="button"></span>\n                        </div>\n                    </div>\n                </div>'}_interactionHandler(e,t){const a=this;super._interactionHandler(e,t)||(e===a.$.expandCollapseContainer.firstElementChild?a.$.fireEvent("collapseAll"):e===a.$.expandCollapseContainer.children[1]&&a.$.fireEvent("expandAll"))}_localize(){super._localize();this.$.expandCollapseContainer.firstElementChild.innerHTML=this.localize("collapseAll"),this.$.expandCollapseContainer.children[1].innerHTML=this.localize("expandAll"),this.$.sortable.$.container.setAttribute("no-grouping",this.localize("noGrouping"))}_setFocusable(){super._setFocusable();const e=this.disabled||this.unfocusable?-1:0;this.$.expandCollapseContainer.firstElementChild.tabIndex=e,this.$.expandCollapseContainer.children[1].tabIndex=e}}),Smart("smart-multi-column-filter-panel",class extends Smart.BaseElement{static get properties(){return{closeButtonPosition:{value:"left",allowedValues:["left","right"],type:"string"},dataSource:{value:[],type:"array",reflectToAttribute:!1},editorCallback:{value:null,type:"function?",reflectToAttribute:!1},editorPlaceholder:{value:"Value",type:"string"},messages:{value:{en:{addFilter:"+ Add filter",and:"And",apply:"Apply",cancel:"Cancel",CONTAINS:"contains",CONTAINS_CASE_SENSITIVE:"contains (case sensitive)",DOES_NOT_CONTAIN:"does not contain",DOES_NOT_CONTAIN_CASE_SENSITIVE:"does not contain (case sensitive)",EMPTY:"empty",ENDS_WITH:"ends with",ENDS_WITH_CASE_SENSITIVE:"ends with (case sensitive)",EQUAL:"equal",EQUAL_CASE_SENSITIVE:"equal (case sensitive)",GREATER_THAN:"greater than",GREATER_THAN_OR_EQUAL:"greater than or equal",LESS_THAN:"less than",LESS_THAN_OR_EQUAL:"less than or equal",noFilters:"No filters applied",NOT_EMPTY:"not empty",NOT_EQUAL:"not equal",NOT_NULL:"not null",NULL:"null",or:"Or",STARTS_WITH:"starts with",STARTS_WITH_CASE_SENSITIVE:"starts with (case sensitive)",where:"Where"}},type:"object",extend:!0},operator:{value:"and",allowedValues:["and","or"],type:"string"},value:{value:[],type:"array"}}}static get listeners(){return{change:"_changeHandler",click:"_interactionHandler",keydown:"_interactionHandler"}}static get requires(){return{"Smart.Button":"smart.button.js","Smart.CheckBox":"smart.checkbox.js","Smart.DateTimePicker":"smart.datetimepicker.js","Smart.FilterGroup":"smart.filter.js","Smart.Input":"smart.input.js","Smart.NumericTextBox":"smart.numerictextbox.js"}}static get styleUrls(){return["smart.gridpanel.css"]}template(){return'<div id="container" role="presentation">\n                    <div id="itemsContainer" class="smart-filter-panel-items-container smart-unselectable"></div>\n                    <div id="footer" class="smart-grid-panel-container-footer" role="presentation">\n                        <div id="addFilterButton" class="smart-filter-panel-add-filter-button smart-unselectable" role="button"></div>\n                        <div id="buttonsContainer" class="smart-grid-panel-buttons-container smart-unselectable" role="presentation">\n                            <span class="smart-grid-panel-cancel-button" role="button"></span>\n                            <span class="smart-grid-panel-apply-button" role="button"></span>\n                        </div>\n                    </div>\n                </div>'}ready(){super.ready()}render(){this.setAttribute("role","dialog"),this._setFocusable(),this._localize(),this._applyValue(),super.render()}propertyChangedHandler(e,t,a){super.propertyChangedHandler(e,t,a);const i=this;switch(e){case"animation":case"theme":case"rightToLeft":Array.from(i.$.itemsContainer.querySelectorAll("smart-date-time-picker, smart-numeric-text-box, smart-check-box, smart-input")).forEach(t=>{t[e]=a,"smart-input"===t.tagName.toLowerCase()&&"rightToLeft"===e&&"none"!==t.dropDownButtonPosition&&(t.dropDownButtonPosition=a?"left":"right")});break;case"disabled":case"unfocusable":i._setFocusable(!0);break;case"dataSource":case"value":i._applyValue();break;case"editorPlaceholder":Array.from(i.$.itemsContainer.getElementsByClassName("editor")).forEach(e=>e.placeholder=a);break;case"locale":case"messages":i._localize(!0);break;case"operator":i._setOperator()}}_setOperator(){const e=this,t=e.localize(e.operator);for(let a=2;a<e._items.length;a++)e._items[a].children[1].innerHTML=t}_changeHandler(e){const t=this,a=t.shadowRoot||t.isInShadowDOM?e.composedPath()[0]:e.target;if(a instanceof Smart.Input==!1)return;const i=a.parentElement,n=i.children;if(a===n[1])t.operator=a.$.input.dataValue,t._setOperator();else if(a===n[2]){const a=t.dataSource.find(t=>t.dataField===e.detail.oldValue).dataType,l=t.dataSource.find(t=>t.dataField===e.detail.value),r=l.dataType;if("enum"!==r&&r===a)return void(t.editorCallback&&t.editorCallback(n[4],l));const o=n[3].value;let s,d;switch(r){case"date":s=t._numberAndDateConditions,d=document.createElement("smart-date-time-picker"),d.calendarButton=!0,d.dropDownAppendTo="body",d.dropDownDisplayMode="auto",d.formatString="M/d/yy H:mm";break;case"number":s=t._numberAndDateConditions,d=document.createElement("smart-numeric-text-box");break;case"boolean":s=t._booleanConditions,d=document.createElement("smart-check-box");break;case"enum":s=t._enumConditions,d=document.createElement("smart-input"),d.dataSource=l.options,d.readonly=!0,d.dropDownButtonPosition="right";break;default:s=t._stringConditions,d=document.createElement("smart-input")}d.rightToLeft=t.rightToLeft,d.animation=t.animation,d.theme=t.theme,d.unfocusable=t.disabled||t.unfocusable,"boolean"!==r&&(d.placeholder=t.editorPlaceholder),t.editorCallback&&t.editorCallback(d,l),n[4].remove(),i.appendChild(d),""===o||s.find(e=>e.label===o)||(n[3].value=""),n[3].dataSource=s,i.dataType=r}else if(a===n[3]){const e=n[4],t=a.$.input.dataValue;-1!==t.indexOf("NULL")||-1!==t.indexOf("EMPTY")?(e.value="",e.checked=!1,e.classList.add("smart-visibility-hidden")):e.classList.remove("smart-visibility-hidden"),a.condition=t}}_interactionHandler(e){const t=this;if(t.disabled||t.readonly)return;if("keydown"===e.type){if(" "!==e.key&&"Enter"!==e.key)return;e.preventDefault()}const a=t.shadowRoot||t.isInShadowDOM?e.composedPath()[0]:e.target,i=a.closest(".smart-grid-panel-item");if(i){if(a===i.firstElementChild){const e=t._items.indexOf(i);let a;t._items.splice(e,1),i.remove(),t._items.length>0&&e<2&&(0===e&&(t._items[0].children[1].remove(),a=document.createElement("div"),a.innerHTML=t.localize("where"),t._items[0].insertBefore(a,t._items[0].children[1])),t._items.length>1&&(t._items[1].children[1].remove(),a=document.createElement("smart-input"),a.className="underlined",a.dataSource=[{value:"and",label:t.localize("and")},{value:"or",label:t.localize("or")}],a.dropDownButtonPosition=t.rightToLeft?"left":"right",a.readonly=!0,a.value=t.localize(t.operator),a.animation=t.animation,a.theme=t.theme,a.rightToLeft=t.rightToLeft,a.unfocusable=t.disabled||t.unfocusable,t._items[1].insertBefore(a,t._items[1].children[1])))}}else if(a===t.$.addFilterButton&&t.dataSource.length>0)t.$.itemsContainer.appendChild(t._createItem(t.dataSource[0],"","",t._items.length));else if(a!==t.$.buttonsContainer.firstElementChild){if(a===t.$.buttonsContainer.children[1]){const e=t._stringConditions.concat(t._numberAndDateConditions),a=t.operator,i=[],n={},l=[];t._items.forEach(l=>{const r=t.dataSource.find(e=>e.label===l.children[2].value),o=[];let s=l.children[3].value;if(""===s)return;let d=r.dataType;if(s=e.find(e=>e.label===s).value,o.push(r.dataField,s),-1===s.indexOf("NULL")&&-1===s.indexOf("EMPTY"))if("boolean"===d)o.push(l.children[4].checked);else if("date"===d)o.push(l.children[4].value.toDate());else if("enum"===d){let e=l.children[4].$.input.dataValue;if(void 0===e){const t=r.options.find(e=>e.label===l.children[4].value);if(!t)return;e=t.value}d="string",o.push(e)}else o.push(l.children[4].value);let c=n[o[0]];void 0===c&&(c=new Smart.Utilities.FilterGroup,n[o[0]]=c);const u=c.createFilter(d,o[2],o[1]);c.addFilter(a,u),i.push(o)});for(let e in n)l.push([e,n[e]]);t.value=i,t.$.fireEvent("apply",{filters:l,operator:a,value:i})}}else t.$.fireEvent("cancel")}_applyValue(){const e=this,t=document.createDocumentFragment();let a=0;for(e._items=[];e.$.itemsContainer.firstElementChild;)e.$.itemsContainer.firstElementChild.remove();0!==e.dataSource.length&&(e.value.forEach(i=>{if(!Array.isArray(i))return;const n=i[0],l=e.dataSource.find(e=>e.dataField===n);if(!l)return;const r=e._createItem(l,i[1],i[2],a);t.appendChild(r),a++}),e.$.itemsContainer.appendChild(t))}_createItem(e,t,a,i){const n=this,l=n.disabled||n.unfocusable?-1:0,r=document.createElement("div"),o=document.createDocumentFragment(),s=document.createElement("div"),d=document.createElement("smart-input"),c=document.createElement("smart-input");let u,h;return s.className="smart-grid-panel-item-close-button",s.tabIndex=l,s.setAttribute("role","button"),s.setAttribute("aria-label","button"),o.appendChild(s),0===i?(u=document.createElement("div"),u.innerHTML=n.localize("where"),u.setAttribute("role","presentation")):1===i?(u=document.createElement("smart-input"),u.className="underlined",u.dataSource=[{value:"and",label:n.localize("and")},{value:"or",label:n.localize("or")}],u.dropDownButtonPosition=n.rightToLeft?"left":"right",u.readonly=!0,u.value=n.localize(n.operator),u.animation=n.animation,u.theme=n.theme,u.rightToLeft=n.rightToLeft,u.unfocusable=n.disabled||n.unfocusable,u.setAttribute("aria-label","Operator")):(u=document.createElement("div"),u.innerHTML=n.localize(n.operator),u.setAttribute("role","presentation")),o.appendChild(u),d.className="underlined",d.dataSource=n.dataSource.map(e=>({value:e.dataField,label:e.label,icon:e.icon})),d.dropDownButtonPosition=n.rightToLeft?"left":"right",d.readonly=!0,d.value=e.label,d.animation=n.animation,d.theme=n.theme,d.rightToLeft=n.rightToLeft,d.unfocusable=n.disabled||n.unfocusable,d.setAttribute("aria-label","Field"),o.appendChild(d),"boolean"===e.dataType?(c.dataSource=n._booleanConditions,h=document.createElement("smart-check-box"),h.checked="boolean"==typeof a&&a):"date"===e.dataType?(c.dataSource=n._numberAndDateConditions,h=document.createElement("smart-date-time-picker"),h.dropDownDisplayMode="auto",h.calendarButton=!0,h.dropDownAppendTo="body",h.formatString="M/d/yy H:mm",h.value=a):"number"===e.dataType?(c.dataSource=n._numberAndDateConditions,h=document.createElement("smart-numeric-text-box"),h.value="number"==typeof a||"string"==typeof a?a:0):"enum"===e.dataType?(c.dataSource=n._enumConditions,h=document.createElement("smart-input"),h.dataSource=e.options,h.readonly=!0,h.dropDownButtonPosition="right",h.value=a?e.options.find(e=>e.value===a).label:""):(c.dataSource=n._stringConditions,h=document.createElement("smart-input"),h.value=null!=a?a.toString():""),c.className="underlined",c.dropDownButtonPosition=n.rightToLeft?"left":"right",c.readonly=!0,c.animation=n.animation,c.theme=n.theme,c.rightToLeft=n.rightToLeft,c.unfocusable=n.disabled||n.unfocusable,c.setAttribute("aria-label","Condition"),c.dataSource.find(e=>e.value===t)?(c.value=n.localize(t),c.condition=t):(h.value="",h.checked=!1),void 0===t||-1===t.indexOf("NULL")&&-1===t.indexOf("EMPTY")||(h.value="",h.checked=!1,h.classList.add("smart-visibility-hidden")),h.animation=n.animation,h.classList.add("editor"),h.rightToLeft=n.rightToLeft,h.theme=n.theme,h.unfocusable=n.disabled||n.unfocusable,"boolean"!==e.dataType&&(h.placeholder=n.editorPlaceholder),n.editorCallback&&n.editorCallback(h,e),o.appendChild(c),o.appendChild(h),r.appendChild(o),r.className="smart-grid-panel-item",n._items.push(r),r.dataType=e.dataType,r}_localize(e){const t=this;t.$.addFilterButton.innerHTML=t.localize("addFilter"),t.$.buttonsContainer.firstElementChild.innerHTML=t.localize("cancel"),t.$.buttonsContainer.children[1].innerHTML=t.localize("apply"),t.$.itemsContainer.setAttribute("no-filters",t.localize("noFilters")),t._stringConditions=[{value:"EMPTY",label:t.localize("EMPTY")},{value:"NOT_EMPTY",label:t.localize("NOT_EMPTY")},{value:"CONTAINS",label:t.localize("CONTAINS")},{value:"CONTAINS_CASE_SENSITIVE",label:t.localize("CONTAINS_CASE_SENSITIVE")},{value:"DOES_NOT_CONTAIN",label:t.localize("DOES_NOT_CONTAIN")},{value:"DOES_NOT_CONTAIN_CASE_SENSITIVE",label:t.localize("DOES_NOT_CONTAIN_CASE_SENSITIVE")},{value:"STARTS_WITH",label:t.localize("STARTS_WITH")},{value:"STARTS_WITH_CASE_SENSITIVE",label:t.localize("STARTS_WITH_CASE_SENSITIVE")},{value:"ENDS_WITH",label:t.localize("ENDS_WITH")},{value:"ENDS_WITH_CASE_SENSITIVE",label:t.localize("ENDS_WITH_CASE_SENSITIVE")},{value:"EQUAL",label:t.localize("EQUAL")},{value:"EQUAL_CASE_SENSITIVE",label:t.localize("EQUAL_CASE_SENSITIVE")},{value:"NULL",label:t.localize("NULL")},{value:"NOT_NULL",label:t.localize("NOT_NULL")}],t._enumConditions=[{value:"EQUAL",label:t.localize("EQUAL")},{value:"NOT_EQUAL",label:t.localize("NOT_EQUAL")}],t._numberAndDateConditions=[{value:"EQUAL",label:t.localize("EQUAL")},{value:"NOT_EQUAL",label:t.localize("NOT_EQUAL")},{value:"LESS_THAN",label:t.localize("LESS_THAN")},{value:"LESS_THAN_OR_EQUAL",label:t.localize("LESS_THAN_OR_EQUAL")},{value:"GREATER_THAN",label:t.localize("GREATER_THAN")},{value:"GREATER_THAN_OR_EQUAL",label:t.localize("GREATER_THAN_OR_EQUAL")},{value:"NULL",label:t.localize("NULL")},{value:"NOT_NULL",label:t.localize("NOT_NULL")}],t._booleanConditions=[{value:"EQUAL",label:t.localize("EQUAL")},{value:"NOT_EQUAL",label:t.localize("NOT_EQUAL")},{value:"NULL",label:t.localize("NULL")},{value:"NOT_NULL",label:t.localize("NOT_NULL")}],e&&t._items.forEach((e,a)=>{const i=e.children[1],n=e.children[3];0===a?i.innerHTML=t.localize("where"):1===a?(i.dataSource=[{value:"and",label:t.localize("and")},{value:"or",label:t.localize("or")}],i.value=t.localize(t.operator)):i.innerHTML=t.localize(t.operator),"string"===e.dataType?n.dataSource=t._stringConditions:"enum"===e.dataType?n.dataSource=t._enumConditions:"boolean"===e.dataType?n.dataSource=t._booleanConditions:n.dataSource=t._numberAndDateConditions,n.value=n.condition?t.localize(n.condition):""})}_setFocusable(e){const t=this,a=t.disabled||t.unfocusable?-1:0;if(t.$.addFilterButton.tabIndex=a,t.$.buttonsContainer.firstElementChild.tabIndex=a,t.$.buttonsContainer.children[1].tabIndex=a,e){const e=Array.from(t.$.itemsContainer.getElementsByClassName("smart-grid-panel-item-close-button")),i=Array.from(t.$.itemsContainer.querySelectorAll("smart-date-time-picker, smart-numeric-text-box, smart-check-box, smart-input"));e.forEach(e=>e.tabIndex=a),i.forEach(e=>e.unfocusable=t.disabled||t.unfocusable)}}}),Smart("smart-column-panel",class extends Smart.BaseElement{static get properties(){return{dataSource:{value:[],type:"array",reflectToAttribute:!1},messages:{value:{en:{apply:"Apply",cancel:"Cancel",find:"Find a field",noResults:"No results"}},type:"object",extend:!0}}}static get listeners(){return{click:"_interactionHandler",keydown:"_interactionHandler","find.keyup":"_findKeyupHandler","sortable.dragEnd":"_sortableDragEndHandler"}}static get requires(){return{"Smart.Sortable":"smart.sortable.js"}}static get styleUrls(){return["smart.gridpanel.css"]}template(){return'<div id="container" role="presentation">\n                    <div class="smart-column-panel-find-container" role="search">\n                        <input id="find" readonly="[[readonly]]" role="searchbox" aria-label="Find a field"></input>\n                        <span id="clearButton" class="clear-button smart-hidden" role="button" aria-label="Clear"></span>\n                    </div>\n                    <smart-sortable id="sortable" right-to-left="[[rightToLeft]]" animation="[[animation]]" disabled="[[readonly]]" drag-mode="handle" handle-position="right" handle-visibility="visible" theme="[[theme]]"></smart-sortable>\n                    <div id="footer" class="smart-grid-panel-container-footer" role="presentation">\n                        <div id="buttonsContainer" class="smart-grid-panel-buttons-container smart-unselectable" role="presentation">\n                            <span class="smart-grid-panel-cancel-button" role="button"></span>\n                            <span class="smart-grid-panel-apply-button" role="button"></span>\n                        </div>\n                    </div>\n                </div>'}ready(){super.ready()}render(){this.setAttribute("role","dialog"),this._positionChanged=!1,this._localize(),this._createSortItems(),super.render()}propertyChangedHandler(e,t,a){super.propertyChangedHandler(e,t,a);const i=this;switch(e){case"disabled":case"unfocusable":i._setFocusable();break;case"dataSource":{const e=i.$.sortable.$.container;for(;e.firstChild;)e.removeChild(e.firstChild);i._createSortItems(),i._positionChanged=!1,i.$.find.value="";break}case"locale":case"messages":i._localize()}}_createSortItems(){const e=this,t=document.createDocumentFragment();e._HTMLToSourceMap=new Map,e.dataSource.forEach(a=>t.appendChild(e._createSortItem(a))),e.$.sortable.$.container.appendChild(t),e.$.sortable.updateItems(),e._setFocusable()}_createSortItem(e){const t=document.createElement("div"),a=this.id+"Label"+e.dataField;return this._HTMLToSourceMap.set(t,e),t.className="smart-grid-panel-item",t.innerHTML=`<div class="toggle-visibility${!1!==e.visible?"":" hidden"}${e.disableToggle?" disable-toggle":""}" role="button" aria-controls="${a}" aria-label="Toggle visibility"></div>\n<span id="${a}" class="smart-column-panel-label smart-unselectable${e.icon?" icon "+e.icon:""}">${e.label}</span>`,t}_interactionHandler(e){const t=this;if(t.disabled||t.readonly||"keydown"===e.type&&-1===[" ","Enter"].indexOf(e.key))return;const a=t.shadowRoot||t.isInShadowDOM?e.composedPath()[0]:e.target;if(a.classList.contains("toggle-visibility"))a.classList.toggle("hidden");else if(a.parentElement===t.$.buttonsContainer){if(a===t.$.buttonsContainer.firstElementChild)return void t.$.fireEvent("cancel");if(a===t.$.buttonsContainer.children[1]){const e=[];t.$.sortable._items.forEach(a=>{const i=Object.assign({},t._HTMLToSourceMap.get(a));i.visible=!a.firstElementChild.classList.contains("hidden"),e.push(i)}),t.$.fireEvent("apply",{value:e,positionChanged:t._positionChanged}),t._positionChanged=!1}}else a.classList.contains("clear-button")&&(t.$.find.value="",t._findKeyupHandler())}_findKeyupHandler(){const e=this;if(e.disabled||e.readonly)return;const t=e.$.find,a=t.value,i=e.$.sortable._items;if(void 0===e._disabledSortable&&(e._disabledSortable=e.$.sortable.disabled),""===a)return t.parentElement.classList.remove("no-results"),e.$.clearButton.classList.add("smart-hidden"),i.forEach(e=>e.classList.remove("smart-hidden")),e.$.sortable.disabled=e._disabledSortable||e.readonly,void delete e._disabledSortable;let n=!0;e.$.clearButton.classList.remove("smart-hidden"),i.forEach(t=>{-1===e._HTMLToSourceMap.get(t).label.toLowerCase().indexOf(a.toLowerCase())?t.classList.add("smart-hidden"):(t.classList.remove("smart-hidden"),n=!1)}),e.$.sortable.disabled=!0,n?t.parentElement.classList.add("no-results"):t.parentElement.classList.remove("no-results")}_sortableDragEndHandler(){this._positionChanged=!0}_localize(){this.$.find.placeholder=this.localize("find"),this.$.buttonsContainer.firstElementChild.innerHTML=this.localize("cancel"),this.$.buttonsContainer.children[1].innerHTML=this.localize("apply"),this.$.container.firstElementChild.setAttribute("no-results",this.localize("noResults"))}_setFocusable(){const e=this.disabled||this.unfocusable?-1:0,t=Array.from(this.$.sortable.getElementsByClassName("toggle-visibility"));this.$.find.tabIndex=e,this.$.clearButton.tabIndex=e,this.$.buttonsContainer.firstElementChild.tabIndex=e,this.$.buttonsContainer.children[1].tabIndex=e,t.forEach(t=>t.tabIndex=t.classList.contains("disable-toggle")?-1:e)}}),Smart("smart-data-view",class extends Smart.BaseElement{static get properties(){return{addNewButton:{value:!1,type:"boolean"},allowDrag:{value:!1,type:"boolean"},collapsible:{value:!1,type:"boolean"},columns:{value:[],type:"object",reflectToAttribute:!1},dataSource:{value:null,type:"object?",reflectToAttribute:!1},editable:{value:!1,type:"boolean"},headerPosition:{value:"none",allowedValues:["none","top","bottom"],type:"string"},messages:{value:{en:{addFilter:"+ Add filter",and:"And",apply:"Apply",booleanFirst:"☐",booleanLast:"☑",cancel:"Cancel",CONTAINS:"contains",CONTAINS_CASE_SENSITIVE:"contains (case sensitive)",dateFirst:"1",dateLast:"9",DOES_NOT_CONTAIN:"does not contain",DOES_NOT_CONTAIN_CASE_SENSITIVE:"does not contain (case sensitive)",EMPTY:"empty",ENDS_WITH:"ends with",ENDS_WITH_CASE_SENSITIVE:"ends with (case sensitive)",EQUAL:"equal",EQUAL_CASE_SENSITIVE:"equal (case sensitive)",filter:"Filter",filteredByMultiple:"{{n}} filters",filteredByOne:"1 filter",filterValuePlaceholder:"Value",find:"Find a field",findInView:"Find in view",firstBy:"Sort by",found:"{{nth}} of {{n}}",from:"from",GREATER_THAN:"greater than",GREATER_THAN_OR_EQUAL:"greater than or equal",LESS_THAN:"less than",LESS_THAN_OR_EQUAL:"less than or equal",noFilters:"No filters applied",noResults:"No results",noSorting:"No sorting applied",NOT_EMPTY:"not empty",NOT_EQUAL:"not equal",NOT_NULL:"not null",NULL:"null",numberFirst:"1",numberLast:"9",ok:"OK",or:"Or",pickAnother:"Pick another field to sort by",sort:"Sort",sortedByMultiple:"Sorted by {{n}} fields",sortedByOne:"Sorted by 1 field",STARTS_WITH:"starts with",STARTS_WITH_CASE_SENSITIVE:"starts with (case sensitive)",stringFirst:"A",stringLast:"Z",thenBy:"then by",where:"Where"}}}}}static get listeners(){return{"header.apply":"_applyHandler","header.cancel":"closePanel","headerDropDown.transitionend":"_headerDropDownTransitionendHandler","searchInput.keyup":"_searchInputKeyupHandler",resize:"_resizeHandler","document.move":"_documentMoveHandler","document.up":"_documentUpHandler"}}render(){const e=this;e.$.headerDropDown.id||(e.$.headerDropDown.id=e.id+"HeaderDropDown"),e.setAttribute("role","group"),e._isMobile=Smart.Utilities.Core.isMobile,super.render()}addFilter(e,t="and"){const a=this;if(!Array.isArray(e)||e.length>0&&!Array.isArray(e[0]))return;let i;if(a.closePanel(),arguments[2]?i={filters:arguments[2],operator:t}:(i={filters:[],operator:t},e.forEach(e=>{e[1].filters.forEach(t=>{i.filters.push([e[0],t.condition,t.value])})})),JSON.stringify(i)===JSON.stringify(a._appliedFiltering))return;const n=i.filters.length;if(a._appliedFiltering=i,a._applyFilter(e,t),a.$.fireEvent("filter"),0===n)return a.$.filterButton.firstElementChild.innerHTML=a.localize("filter"),void a.$.filterButton.classList.remove("filtered");a.$.filterButton.firstElementChild.innerHTML=1===n?a.localize("filteredByOne"):a.localize("filteredByMultiple",{n:n}),a.$.filterButton.classList.add("filtered")}addSort(e,t){const a=this,i=a.dataSource,n=JSON.stringify(a._appliedSorting);let l;function r(e,n){if(a.columns.find(t=>t.dataField===e)){let a=Array.isArray(t)?t[n]:"string"==typeof t?t:"ascending";l.dataFields.push(e),l.dataTypes.push(i.dataFields.find(t=>t.name===e).dataType),a=a&&-1!==a.indexOf("desc")?"descending":"ascending",l.orderBy.push(a)}}if(0===arguments.length||!i||0===i.length)return;if(a.closePanel(),1===arguments.length&&"object"==typeof e)l=e;else if(l={dataFields:[],dataTypes:[],orderBy:[]},Array.isArray(e))e.forEach(r);else{if("string"!=typeof e)return;r(e,0)}if(a.closePanel(),a._appliedSorting=l,n===JSON.stringify(a._appliedSorting))return;const o=a._appliedSorting.dataFields.length;if(a._applySort(),a.$.fireEvent("sort"),0===o)return a.$.sortButton.firstElementChild.innerHTML=a.localize("sort"),void a.$.sortButton.classList.remove("sorted");a.$.sortButton.firstElementChild.innerHTML=1===o?a.localize("sortedByOne"):a.localize("sortedByMultiple",{n:o}),a.$.sortButton.classList.add("sorted")}closePanel(){const e=this.$.headerDropDown;e.classList.add("smart-visibility-hidden"),this._closeSearchPanel(),e.controlledBy&&(e.controlledBy.removeAttribute("aria-controls"),e.controlledBy.setAttribute("aria-expanded",!1),delete e.controlledBy)}openFilterPanel(e,t){const a=this,i=a.dataSource;if(!i||0===i.length||a.disabled||"none"===a.headerPosition)return;let n;a._editInfo&&a._editInfo.window.close(),a.$.headerDropDown.classList.add("filter-panel"),a.$.headerDropDown.classList.remove("customize-panel","sort-panel","search-panel"),a.$.filter.classList.remove("smart-hidden"),a.$.customize.classList.add("smart-hidden"),a.$.sort.classList.add("smart-hidden"),a.$.search.classList.add("smart-hidden"),a._closeSearchPanel(),a._filterPartCreated?(n=a.$.filter.firstElementChild,n.set("operator",a._appliedFiltering.operator),n.set("value",a._appliedFiltering.filters),n._applyValue(),n.rightToLeft=a.rightToLeft):(n=document.createElement("smart-multi-column-filter-panel"),n.rightToLeft=a.rightToLeft,n.animation=a.animation,n.dataSource=e,n.locale=a.locale,n.messages=a._innerElementMessages.multiColumnFilterPanel,n.operator=a._appliedFiltering.operator,n.editorPlaceholder=a.localize("filterValuePlaceholder"),n.theme=a.theme,n.value=a._appliedFiltering.filters,n.editorCallback=t,a.$.filter.appendChild(n),a._filterPartCreated=!0),a._openHeaderDropDown(a.$.filterButton)}openSortPanel(e){const t=this,a=t.dataSource;if(!a||0===a.length||t.disabled||"none"===t.headerPosition)return;let i;t._closeDialog(),t.$.headerDropDown.classList.add("sort-panel"),t.$.headerDropDown.classList.remove("customize-panel","filter-panel","search-panel"),t.$.sort.classList.remove("smart-hidden"),t.$.customize.classList.add("smart-hidden"),t.$.filter.classList.add("smart-hidden"),t.$.search.classList.add("smart-hidden"),t._closeSearchPanel(),t._sortPartCreated?(i=t.$.sort.firstElementChild,i.rightToLeft=t.rightToLeft,i.set("dataSource",e),i.propertyChangedHandler("dataSource",void 0,e)):(i=document.createElement("smart-sort-panel"),i.rightToLeft=t.rightToLeft,i.animation=t.animation,i.dataSource=e,i.locale=t.locale,i.messages=t._innerElementMessages.sortPanel,i.theme=t.theme,t.$.sort.appendChild(i),t._sortPartCreated=!0),t._openHeaderDropDown(t.$.sortButton)}removeFilter(){this.addFilter([])}removeSort(){this.addSort({dataFields:[],dataTypes:[],orderBy:[]})}_clearFilterAndSortUI(){this._appliedFiltering={filters:[],operator:"and"},this._appliedSorting={dataFields:[],dataTypes:[],orderBy:[]},this.$.filterButton.classList.remove("filtered"),this.$.sortButton.classList.remove("sorted"),this.$.filterButton.firstElementChild.innerHTML=this.localize("filter"),this.$.sortButton.firstElementChild.innerHTML=this.localize("sort")}_getInnerElementMessages(){const e=this.locale,t={columnPanel:{},multiColumnFilterPanel:{},sortPanel:{},dateTimePicker:{}};t.columnPanel[e]={apply:this.localize("apply"),cancel:this.localize("cancel"),find:this.localize("find"),noResults:this.localize("noResults")},t.multiColumnFilterPanel[e]={addFilter:this.localize("addFilter"),and:this.localize("and"),apply:this.localize("apply"),cancel:this.localize("cancel"),CONTAINS:this.localize("CONTAINS"),CONTAINS_CASE_SENSITIVE:this.localize("CONTAINS_CASE_SENSITIVE"),DOES_NOT_CONTAIN:this.localize("DOES_NOT_CONTAIN"),DOES_NOT_CONTAIN_CASE_SENSITIVE:this.localize("DOES_NOT_CONTAIN_CASE_SENSITIVE"),EMPTY:this.localize("EMPTY"),ENDS_WITH:this.localize("ENDS_WITH"),ENDS_WITH_CASE_SENSITIVE:this.localize("ENDS_WITH_CASE_SENSITIVE"),EQUAL:this.localize("EQUAL"),EQUAL_CASE_SENSITIVE:this.localize("EQUAL_CASE_SENSITIVE"),GREATER_THAN:this.localize("GREATER_THAN"),GREATER_THAN_OR_EQUAL:this.localize("GREATER_THAN_OR_EQUAL"),LESS_THAN:this.localize("LESS_THAN"),LESS_THAN_OR_EQUAL:this.localize("LESS_THAN_OR_EQUAL"),noFilters:this.localize("noFilters"),NOT_EMPTY:this.localize("NOT_EMPTY"),NOT_EQUAL:this.localize("NOT_EQUAL"),NOT_NULL:this.localize("NOT_NULL"),NULL:this.localize("NULL"),or:this.localize("or"),STARTS_WITH:this.localize("STARTS_WITH"),STARTS_WITH_CASE_SENSITIVE:this.localize("STARTS_WITH_CASE_SENSITIVE"),where:this.localize("where")},t.sortPanel[e]={apply:this.localize("apply"),booleanFirst:this.localize("booleanFirst"),booleanLast:this.localize("booleanLast"),cancel:this.localize("cancel"),dateFirst:this.localize("dateFirst"),dateLast:this.localize("dateLast"),firstBy:this.localize("firstBy"),from:this.localize("from"),numberFirst:this.localize("numberFirst"),numberLast:this.localize("numberLast"),noSorting:this.localize("noSorting"),pickAnother:this.localize("pickAnother"),stringFirst:this.localize("stringFirst"),stringLast:this.localize("stringLast"),thenBy:this.localize("thenBy")},t.dateTimePicker[e]={now:this.localize("now"),dateTabLabel:this.localize("dateTabLabel"),timeTabLabel:this.localize("timeTabLabel")},this._innerElementMessages=t}_handleHeaderPosition(e){const t=this,a=t.headerPosition,i=t.$.header;"none"!==a?(i.classList.remove("smart-hidden"),"top"===a&&i.nextElementSibling!==e?t.$.container.insertBefore(i,e):"bottom"===a&&i.previousElementSibling!==e&&t.$.container.insertBefore(i,t.$.loadingIndicatorContainer)):i.classList.add("smart-hidden")}_headerClickHandler(e,t){const a=this,i=a.$.headerDropDown;function n(e,t){i.classList.contains("smart-visibility-hidden")||e.classList.contains("smart-hidden")?a[t]():a.closePanel()}if(a.$.customizeButton.contains(e))n(a.$.customize,"openCustomizePanel");else if(a.$.filterButton.contains(e))n(a.$.filter,"openFilterPanel");else if(a.$.sortButton.contains(e))n(a.$.sort,"openSortPanel");else if(e===a.$.searchButton)n(a.$.search,"_openSearchPanel");else if(e===a.$.searchClose)a.closePanel();else if(e===a.$.searchPrev||e===a.$.searchNext){const i=a._searchInfo,n=i.foundIdsArray,l=e===a.$.searchNext,r=n.length;let o;if(void 0===i.highlighted)o=l?0:r-1;else{if(1===n.length)return;{const e=n.indexOf(i.highlighted);Array.from(t.getElementsByClassName("smart-data-view-highlighted")).forEach(e=>e.classList.remove("smart-data-view-highlighted")),o=l?(e+1)%r:e-1>=0?e-1:r-1}}i.highlighted=n[o],a.ensureVisible(i.highlighted).classList.add("smart-data-view-highlighted"),a.$.searchLabel.innerHTML=a.localize("found",{nth:o+1,n:n.length})}}_headerDropDownTransitionendHandler(e){const t=this,a=t.$.headerDropDown;e&&("visibility"!==e.propertyName||a.classList.contains("smart-visibility-hidden"))||(a.classList.contains("search-panel")?t.$.searchInput.focus():!1===t.unfocusable&&(a.classList.contains("customize-panel")?a.querySelector("smart-column-panel").$.find.focus():a.classList.contains("filter-panel")?a.querySelector("smart-multi-column-filter-panel").$.addFilterButton.focus():a.classList.contains("sort-panel")&&a.querySelector("smart-sort-panel").$.inputNotSorted.focus()))}_localizeHeader(){const e=this;e.$.customizeButton.firstElementChild.innerHTML=e.localize("customize"),0===e._appliedFiltering.filters.length?e.$.filterButton.firstElementChild.innerHTML=e.localize("filter"):1===e._appliedFiltering.filters.length?e.$.filterButton.firstElementChild.innerHTML=e.localize("filteredByOne"):e.$.filterButton.firstElementChild.innerHTML=e.localize("filteredByMultiple",{n:e._appliedFiltering.filters.length}),0===e._appliedSorting.dataFields.length?e.$.sortButton.firstElementChild.innerHTML=e.localize("sort"):1===e._appliedSorting.dataFields.length?e.$.sortButton.firstElementChild.innerHTML=e.localize("sortedByOne"):e.$.sortButton.firstElementChild.innerHTML=e.localize("sortedByMultiple",{n:e._appliedSorting.dataFields.length}),e.$.searchInput.placeholder=e.localize("findInView")}_openHeaderDropDown(e){const t=this,a=t.$.headerDropDown;"top"===t.headerPosition?(a.style.bottom=null,a.style.top="100%"):(a.style.top=null,a.style.bottom="100%"),e!==t.$.searchButton?a.style.left=e.offsetLeft-(t.rightToLeft?a.offsetWidth-e.offsetWidth:0)+"px":a.style.left=(t.rightToLeft?e.offsetLeft:e.offsetLeft+e.offsetWidth-a.offsetWidth)+"px",a.classList.remove("smart-visibility-hidden"),a.controlledBy&&(a.controlledBy.removeAttribute("aria-controls"),a.controlledBy.setAttribute("aria-expanded",!1)),a.controlledBy=e,e.setAttribute("aria-controls",a.id),e.setAttribute("aria-expanded",!0),t._headerDropDownTransitionendHandler()}_searchInputKeyupHandler(){const e=this;function t(){e._searchInfo&&e.$.searchInput.value!==e._searchInfo.query&&e._search(e.$.searchInput.value)}if(clearTimeout(e._searchInputTimeout),"Enter"===event.key&&e._searchInfo.foundIdsArray&&e._searchInfo.foundIdsArray.length>1)return t(),void e._headerClickHandler(e.$.searchNext,e.$.cardContainer||e.$.body);e._searchInputTimeout=setTimeout(t,500)}})}});